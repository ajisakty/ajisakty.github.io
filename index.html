<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Markerless AR - Shoes</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">
    <a-scene
      vr-mode-ui="enabled: false"
      renderer="colorManagement: true; physicallyCorrectLights: true;"
      xr-mode="immersive-ar"
      webxr="optionalFeatures: hit-test; requiredFeatures: hit-test;"
      embedded>

      <a-assets>
        <a-asset-item id="sepatu" src="leather_shoes.glb"></a-asset-item>
      </a-assets>

      <!-- Pencahayaan -->
      <a-light type="ambient" intensity="1"></a-light>
      <a-light type="directional" position="0 2 2" intensity="0.7"></a-light>

      <!-- Model -->
      <a-entity
        id="shoes"
        gltf-model="#sepatu"
        visible="false"
        scale="0.005 0.005 0.005">
      </a-entity>

      <a-camera></a-camera>
    </a-scene>

    <button id="startAR" style="position: absolute; z-index: 10; top: 20px; left: 20px; padding: 10px;">
      Start AR
    </button>

    <script>
      const scene = document.querySelector('a-scene');
      const model = document.querySelector('#shoes');
      const startBtn = document.getElementById('startAR');

      startBtn.addEventListener('click', async () => {
        try {
          await scene.enterAR();
          model.setAttribute('position', '0 0 -1');
          model.setAttribute('visible', true);
          startBtn.style.display = 'none';
        } catch (e) {
          alert('AR not supported or permission denied');
        }
      });
    </script>
  </body>
</html>
